<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cena 3D - Primeira Pessoa com Mesa Among Us</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>

    <a-scene>
        <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="1000" 
            height="1000" 
            color="#2c2c2c">
        </a-plane>

        <a-sky color="#87CEEB"></a-sky>

        <a-light type="ambient" color="#444"></a-light>
        <a-light type="directional" intensity="0.5" position="-1 1 2"></a-light>

        <a-entity id="rig" position="0 1.6 0">
            <a-camera look-controls wasd-controls="acceleration: 20">
                <a-cursor color="#FF0000"></a-cursor>
            </a-camera>
        </a-entity>

        <a-box position="-2 0.5 -5" color="#4CC3D9"></a-box>
        <a-sphere position="2 1.25 -7" radius="1.25" color="#EF2D5E"></a-sphere>
        <a-cylinder position="5 0.75 -4" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>

        <a-entity id="among-us-table">
            <a-box 
                position="1.5 0.8 -2" 
                width="2.5" 
                height="0.1" 
                depth="1.2" 
                color="#5D4037"> </a-box>

            <a-box 
                position="0.5 0.3 -1.5" 
                width="0.15" 
                height="0.6" 
                depth="0.15" 
                color="#3E2723"> </a-box>

            <a-box 
                position="2.5 0.3 -1.5" 
                width="0.15" 
                height="0.6" 
                depth="0.15" 
                color="#3E2723">
            </a-box>

            <a-box 
                position="0.5 0.3 -2.5" 
                width="0.15" 
                height="0.6" 
                depth="0.15" 
                color="#3E2723">
            </a-box>

            <a-box 
                position="2.5 0.3 -2.5" 
                width="0.15" 
                height="0.6" 
                depth="0.15" 
                color="#3E2723">
            </a-box>
        </a-entity>
        </a-scene>

    <div style="position: fixed; bottom: 20px; left: 20px; z-index: 999; display: flex; flex-direction: column; gap: 5px;">
        <div style="display: flex; justify-content: center;">
            <button id="moveUp" style="width: 50px; height: 50px;">↑</button>
        </div>
        <div style="display: flex; gap: 5px;">
            <button id="moveLeft" style="width: 50px; height: 50px;">←</button>
            <button id="moveDown" style="width: 50px; height: 50px;">↓</button>
            <button id="moveRight" style="width: 50px; height: 50px;">→</button>
        </div>
        <p style="color: white; font-family: sans-serif; background: rgba(0,0,0,0.5); padding: 5px;">Use o Mouse para olhar</p>
    </div>

    <script>
        const rig = document.querySelector('#rig');
        const speed = 0.1;

        function move(direction) {
            const pos = rig.getAttribute('position');
            // 'z' é a profundidade, 'x' é a largura.
            // Para mover para frente/trás, ajustamos 'z'.
            // Para mover para esquerda/direita, ajustamos 'x'.
            if(direction === 'up') pos.z -= speed;
            if(direction === 'down') pos.z += speed;
            if(direction === 'left') pos.x -= speed;
            if(direction === 'right') pos.x += speed;
            rig.setAttribute('position', pos);
        }

        let timer;
        const buttons = ['moveUp', 'moveDown', 'moveLeft', 'moveRight'];
        buttons.forEach(id => {
            const btn = document.getElementById(id);
            btn.addEventListener('mousedown', () => {
                const dir = id.replace('move', '').toLowerCase();
                timer = setInterval(() => move(dir), 30);
            });
            btn.addEventListener('mouseup', () => clearInterval(timer));
            btn.addEventListener('mouseleave', () => clearInterval(timer));
            btn.addEventListener('touchstart', (e) => { // Para dispositivos móveis
                e.preventDefault(); // Previne o scroll da página
                const dir = id.replace('move', '').toLowerCase();
                timer = setInterval(() => move(dir), 30);
            }, { passive: false }); // Usar { passive: false } para permitir preventDefault
            btn.addEventListener('touchend', () => clearInterval(timer));
            btn.addEventListener('touchcancel', () => clearInterval(timer));
        });
    </script>

</body>
</html>
